(this["webpackJsonpsolve-equation-using-cnn"]=this["webpackJsonpsolve-equation-using-cnn"]||[]).push([[0],{36:function(e,t,s){},37:function(e,t,s){},44:function(e,t,s){"use strict";s.r(t);var a=s(0),o=s.n(a),l=s(12),r=s.n(l),n=(s(36),s(37),s(28)),c=s.n(n);function i(e){let t;e.setup=()=>{t=e.createCanvas(550,300)},e.draw=()=>{},e.mouseDragged=()=>{e.stroke(0),e.strokeWeight(3),e.line(e.mouseX,e.mouseY,e.pmouseX,e.pmouseY)},e.myCustomRedrawAccordingToNewPropsHandler=s=>{if(s.evaluate&&t){t.loadPixels();let e=t.canvas.toDataURL();s.callBack(e)}s.color&&e.background(255)}}var d=s(46),j=s(51),h=s(49),u=s(47),b=(s(24),s(2));let m="";class O extends a.Component{constructor(e){super(e),this.validateFile=e=>{let t=e.target.files[0].name.substring(e.target.files[0].name.lastIndexOf(".")+1).toLowerCase(),s="";if("jpg"===t||"png"===t||"jpeg"===t){s=URL.createObjectURL(e.target.files[0]);let t=e.target.files[0],a=new FileReader;a.onloadend=()=>{m=a.result,this.setState(Object.assign(this.state,{uploadState:!1,imgUrl:s,uploadError:!1,showModal:!0})),console.log(this.state.imgBase64),console.log("RESULT",a.result)},a.readAsDataURL(t)}else m="",this.setState(Object.assign(this.state,{uploadState:!0,imgUrl:"",uploadError:!0,showModal:!0}))},this.handleClose=()=>{this.setState(Object.assign(this.state,{showModal:!1}))},this.modalBody=()=>this.state.uploadError?Object(b.jsx)("div",{children:Object(b.jsx)(j.a,{variant:"danger",children:"The selected file is not an image. Please select an image"})}):Object(b.jsx)("div",{children:Object(b.jsx)(d.a,{alt:"selected image",src:this.state.imgUrl,fluid:!0})}),this.state={uploadState:!0,imgUrl:"",uploadError:!1,showModal:!1}}render(){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"file",onChange:this.validateFile}),Object(b.jsx)("button",{type:"button",className:"btn btn-primary",disabled:this.state.uploadState,onClick:()=>this.props.sendImgToServer(m),children:"Upload!"})]}),Object(b.jsxs)(h.a,{show:this.state.showModal,onHide:this.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",children:[Object(b.jsx)(h.a.Header,{closeButton:!0,children:Object(b.jsx)(h.a.Title,{children:this.state.uploadError?"Error in extension":"Preview of selected image"})}),Object(b.jsx)(h.a.Body,{children:this.modalBody()}),Object(b.jsx)(h.a.Footer,{children:Object(b.jsx)(u.a,{variant:"secondary",onClick:this.handleClose,children:"Close"})})]})]})}}var x=O,g=s(50),p=s(48),v=s(30);var f=function(e){return Object(b.jsx)("div",{className:"offset-md-1",children:Object(b.jsxs)(g.a,{children:[Object(b.jsxs)(g.a.Group,{as:p.a,controlId:"output",children:[Object(b.jsx)(g.a.Label,{column:!0,sm:"3",children:"Entered Equation"}),Object(b.jsx)(v.a,{sm:"5",children:Object(b.jsx)(g.a.Control,{readOnly:!0,placeholder:e.equation})})]}),Object(b.jsxs)(g.a.Group,{as:p.a,controlId:"output1",children:[Object(b.jsx)(g.a.Label,{column:!0,sm:"3",children:"Formatted Equation"}),Object(b.jsx)(v.a,{sm:"5",children:Object(b.jsx)(g.a.Control,{readOnly:!0,placeholder:e.formatted_equation})})]}),Object(b.jsxs)(g.a.Group,{as:p.a,controlId:"output2",children:[Object(b.jsx)(g.a.Label,{column:!0,sm:"3",children:"Result"}),Object(b.jsx)(v.a,{sm:"5",children:Object(b.jsx)(g.a.Control,{readOnly:!0,placeholder:e.result})})]})]})})};let C="";class S extends a.Component{constructor(){super(),this.pseudo=e=>{C=e},this.sendImgToServer=e=>{console.log("req:",e);let t=e.replace("data:image/png;base64,",""),s={};s.image=t;const a="http://localhost:8002";console.log("Sending a request to:",a),fetch(`${a}/predict`,{mode:"cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"same-origin"}).then((e=>e.json())).then((e=>{console.log(e);let t=JSON.parse(e);console.log("Success:",t),this.setState({color:!1,evaluate:!1,equation:t.Entered_equation,formatted_equation:t.Formatted_equation,result:t.solution}),console.log(this.state)})).catch((e=>{console.error("Error:",e)}))},this.onClear=()=>{this.setState({color:!0,evaluate:!1,equation:"",formatted_equation:"",result:""})},this.onEval=()=>{this.setState({color:!1,evaluate:!0,equation:"",formatted_equation:"",result:""})},this.state={color:!1,evaluate:!1,equation:"",formatted_equation:"",result:""}}render(){return Object(b.jsxs)("div",{className:"container ",children:[Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-12 col-md-6 offset-md-2",children:"Draw the equation below"})}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"row align-items-center",children:[Object(b.jsx)("div",{className:"col-12 col-md-6 border border-dark offset-md-2",children:Object(b.jsx)(c.a,{sketch:i,color:this.state.color,evaluate:this.state.evaluate,callBack:this.pseudo})}),Object(b.jsxs)("div",{className:"col-6 col-md-2",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("button",{type:"button",onClick:this.state.evaluate?()=>this.sendImgToServer(C):this.onEval,className:"btn btn-primary btn-block ",children:this.state.evaluate?"Evaluate":"Save"})})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("button",{type:"button",onClick:this.onClear,className:"btn btn-danger btn-block ",children:"Clear"})})})]})]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"offset-md-3",children:Object(b.jsx)(x,{sendImgToServer:this.sendImgToServer})})}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)(f,{equation:this.state.equation,formatted_equation:this.state.formatted_equation,result:this.state.result})]})}}var q=S;var w=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(q,{})})};var N=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,52)).then((t=>{let{getCLS:s,getFID:a,getFCP:o,getLCP:l,getTTFB:r}=t;s(e),a(e),o(e),l(e),r(e)}))};r.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),N()}},[[44,1,2]]]);
//# sourceMappingURL=main.bac209c5.chunk.js.map